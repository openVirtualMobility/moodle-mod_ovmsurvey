define(["jquery","core/ajax","core/notification"],function(a,b,c){var d=function(b,c,d,e){this._region=a(b),this._status=c,this._surveyid=d,this._totalStmts=e,this._region.find(".ovm-option-list").unbind().on("click","button",this._setUserChoice.bind(this))};return d.prototype._setUserChoice=function(d){var e=a(d.target),f=e.data("id"),g=e.data("value"),h=this._status?this._status:localStorage.getItem("ovms-status");""!=f&&""!=g&&b.call([{methodname:"mod_ovmsurvey_set_answer",args:{surveyid:this._surveyid,status:h?h:"",stmtid:f,value:g},done:function(b){return a(d.target).parent().find("button").removeClass("active"),a(d.target).addClass("active"),a(d.target).parent().parent().parent().parent().parent().find(".check-svg").removeClass("hidden"),this._totalStmts==b&&this.showReviewButton(),!0}.bind(this),fail:c.exception}])},d.prototype.showReviewButton=function(){return a("#ovmsurvey-review").show()},d});