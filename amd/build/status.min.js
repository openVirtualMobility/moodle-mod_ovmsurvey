define(["jquery","core/str","core/ajax","core/notification"],function(a,b,c,d){var e=function(){var e=localStorage.getItem("ovms-status");e?b.get_string(e,"ovmsurvey").done(function(b){a("#ovm-status").text(b)}):a("#status_picker").show(),a(".status-item").bind("click",function(){var e=a(this).data("value");localStorage.setItem("ovms-status",e),c.call([{methodname:"mod_ovmsurvey_set_status",args:{status:e},done:function(c){b.get_string(c,"ovmsurvey").done(function(b){a("#ovm-status").text(b),a("#status_picker").hide(),window.location.reload()})}.bind(this),fail:d.exception}])}),a("#ovm-status").bind("click",function(){a("#status_picker").show()})};return e});